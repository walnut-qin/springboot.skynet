(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a3434e"],{"0e8f":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s}));var i=a("b775");function n(t){return Object(i["a"])({url:"/api/common/department/getDeptInfo",method:"post",data:{deptCode:t}})}function s(t){return Object(i["a"])({url:"/api/common/department/getDeptsInfo",method:"post",data:t})}},"1c97":function(t,e,a){"use strict";a("c62b")},"628d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("inpatient-card",{attrs:{data:t.patient},on:{click:function(e){t.dialogVisible=!0}}})],1),a("el-col",{attrs:{span:18,xs:24}},[a("prepay-data-table",{ref:"dataTable",attrs:{patient:t.patient.patientNo}})],1)],1),a("el-dialog",{attrs:{title:"输入住院号",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{"margin-left":"80px","margin-right":"80px"}},[a("el-input",{attrs:{placeholder:"请输入住院号"},model:{value:t.dialogResult,callback:function(e){t.dialogResult=e},expression:"dialogResult"}},[a("template",{slot:"prepend"},[t._v("ZY01000")])],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleDialogConfirm}},[t._v(" 确 定 ")])],1)])],1)},n=[],s=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticStyle:{"border-radius":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("住院患者")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-refresh",size:"mini",type:"info",circle:""},on:{click:t.click}})],1),a("div",{staticClass:"inpatient-profile"},[a("div",{staticClass:"box-center"},[a("el-avatar",{attrs:{size:80}},[t._v(t._s(t.data.name))])],1),a("div",{staticClass:"box-center"},[a("div",{staticClass:"inpatient-name text-center"},[t._v(" "+t._s(t.data.name)+" ")]),a("div",{staticClass:"inpatient-code text-center text-muted"},[t._v(" "+t._s(t.data.patientNo)+" ")])])]),a("div",{staticClass:"inpatient-bio"},[a("div",{staticClass:"inpatient-bio-section"},[a("div",{staticClass:"inpatient-bio-section-header"},[a("i",{staticClass:"el-icon-location-outline"}),a("span",[t._v("基本信息")])]),a("div",{staticClass:"text-muted"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("卡号: ")]),t._v(" "+t._s(t.data.cardNo)+" ")])]),a("el-col",{attrs:{span:12,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("性别: ")]),t._v(" "+t._s(t.data.sex)+" ")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("联系电话: ")]),t._v(" "+t._s(t.data.telephone)+" ")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("身份证号: ")]),t._v(" "+t._s(t.data.identityNo)+" ")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("年龄: ")]),t._v(" "+t._s(t.data.age)+" ")])])],1)],1)]),a("div",{staticClass:"inpatient-bio-section"},[a("div",{staticClass:"inpatient-bio-section-header"},[a("i",{staticClass:"el-icon-tickets"}),a("span",[t._v("住院信息")])]),a("div",{staticClass:"text-muted"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("住院科室: ")]),t._v(" "+t._s(t.data.department)+" ")])]),a("el-col",{attrs:{span:12,xs:24}},[a("div",{staticClass:"text-muted"},[a("span",[t._v("主管医师: ")]),t._v(" "+t._s(t.data.doctor)+" ")])])],1)],1)])])])}),o=[],l={props:{data:{type:Object,default:function(){return{patientNo:"",cardNo:"",name:"",sex:"",telephone:"",identityNo:"",age:"",department:"",doctor:""}}}},methods:{click:function(){this.$emit("click")}}},r=l,c=(a("1c97"),a("2877")),d=Object(c["a"])(r,s,o,!1,null,"cefa6afe",null),p=d.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticStyle:{"border-radius":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("预交金电子票")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-magic-stick",size:"mini",type:"success"},on:{click:t.repair}},[t._v(" 一键修复 ")])],1),a("el-table",{attrs:{data:t.tableData,height:"700px","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"receiptNo",label:"预交金票据号",width:"180"}}),a("el-table-column",{attrs:{prop:"billBatchNo",label:"电子票据代码",width:"180"}}),a("el-table-column",{attrs:{prop:"billNo",label:"电子票据号码",width:"180"}}),a("el-table-column",{attrs:{prop:"random",label:"电子校验码"}})],1)],1)},f=[],b=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("b775"));function m(t){return Object(b["a"])({url:"/api/inpatient/fee/prepay/invoice/getPrepayInfo",method:"post",data:{patientNo:t}})}function v(t){return Object(b["a"])({url:"/api/inpatient/fee/prepay/invoice/fixPrepayInfo",method:"post",data:{receiptNo:t}})}var h={props:{patient:{type:String,default:function(t){return""}}},data:function(){return{tableData:[]}},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return void 0===e.billBatchNo||null===e.billBatchNo||""===e.billBatchNo||void 0===e.billNo||null===e.billNo||""===e.billNo||void 0===e.random||null===e.random||""===e.random?"warning-row":"success-row"},refresh:function(){var t=this;m(this.patient).then((function(e){var a=e.data;t.tableData=a}))},repair:function(){var t=this,e=[];this.tableData.forEach((function(t){void 0!==t.billBatchNo&&null!==t.billBatchNo&&""!==t.billBatchNo||e.push(v(t.receiptNo))})),Promise.all(e).then((function(e){t.$message({message:"修复完成",center:!0,type:"success"}),t.refresh()}))}}},x=h,_=Object(c["a"])(x,u,f,!1,null,null,null),g=_.exports;function N(t){return Object(b["a"])({url:"/api/inpatient/queryInpatientInfo",method:"post",data:{patientNo:t}})}function C(t){return Object(b["a"])({url:"/api/common/patient/queryPatientInfo",method:"post",data:{cardNo:t}})}var w=a("0e8f"),y={components:{InpatientCard:p,PrepayDataTable:g},data:function(){return{patient:{patientNo:"",cardNo:"",name:"",sex:"",telephone:"",identityNo:"",age:"",department:"",doctor:""},dialogVisible:!1,dialogResult:""}},methods:{handleDialogConfirm:function(){var t=this;N("000"+this.dialogResult).then((function(e){var a=e.data;t.patient.patientNo=a.patientNo,t.patient.cardNo=a.cardNo,t.patient.department=a.deptCode,t.patient.doctor=a.docCode})).then((function(e){C(t.patient.cardNo).then((function(e){var a=e.data;t.patient.name=a.name,t.patient.sex=a.sex,t.patient.telephone=a.tel,t.patient.identityNo=a.idenNo,t.patient.age=a.age}))})).then((function(e){Object(w["a"])(t.patient.department).then((function(e){var a=e.data;t.patient.department=a.deptName}))})).then((function(e){t.$refs.dataTable.refresh(),t.dialogVisible=!1}))}}},k=y,j=Object(c["a"])(k,i,n,!1,null,null,null);e["default"]=j.exports},c62b:function(t,e,a){}}]);