<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaos.his.mapper.pharmacy.hedging.PhaComStockInfoHedgingMapper">
    <resultMap id="map" type="com.kaos.his.entity.pharmacy.hedging.PhaComStockInfoHedging">
        <id column="DRUG_DEPT_CODE" jdbcType="VARCHAR" property="drugDeptCode"/>
        <id column="DRUG_CODE" jdbcType="VARCHAR" property="drugCode"/>
        <result column="DRUG_QUALITY" jdbcType="VARCHAR" property="drugQuality"/>
        <result column="PACK_UNIT" jdbcType="VARCHAR" property="packUnit"/>
        <result column="PACK_QTY" jdbcType="VARCHAR" property="packQty"/>
        <result column="MIN_UNIT" jdbcType="VARCHAR" property="minUnit"/>
        <result column="SHOW_FLAG" jdbcType="VARCHAR" property="showFlag"/>
        <result column="SHOW_UNIT" jdbcType="VARCHAR" property="showUnit"/>
        <result column="RETAIL_PRICE" jdbcType="VARCHAR" property="retailPrice"/>
        <result column="STORE_SUM" jdbcType="VARCHAR" property="storeSum"/>
        <result column="STORE_COST" jdbcType="VARCHAR" property="storeCost"/>
        <result column="PREOUT_SUM" jdbcType="VARCHAR" property="preOutSum"/>
        <result column="PREOUT_COST" jdbcType="VARCHAR" property="preOutCost"/>
        <result column="VALID_DATE" jdbcType="VARCHAR" property="validDate"/>
        <result column="PLACE_CODE" jdbcType="VARCHAR" property="placeCode"/>
        <result column="PRODUCER_CODE" jdbcType="VARCHAR" property="producerCode"/>
        <result column="MANAGE_QUALITY" jdbcType="VARCHAR" property="manageQuality"/>
        <result column="LOW_SUM" jdbcType="VARCHAR" property="lowSum"/>
        <result column="TOP_SUM" jdbcType="VARCHAR" property="topSum"/>
        <result column="NEED_BATCH" jdbcType="VARCHAR" property="needBatch"/>
        <result column="USEFUL_DAYS" jdbcType="VARCHAR" property="usefulDays"/>
        <result column="LACK_FLAG" jdbcType="VARCHAR" property="lackFlag"/>
        <result column="DAILTYCHECK_FLAG" jdbcType="VARCHAR" property="dayChkFlag"/>
        <result column="UNIT_FLAG" jdbcType="VARCHAR" property="unitFlag"/>
        <result column="CHANGE_FLAG" jdbcType="VARCHAR" property="changeFlag"/>
        <result column="VALID_STATE" jdbcType="VARCHAR" property="valid"/>
        <result column="MARK" jdbcType="VARCHAR" property="remark"/>
        <result column="OPER_CODE" jdbcType="VARCHAR" property="emplCode"/>
        <result column="OPER_DATE" jdbcType="VARCHAR" property="operDate"/>
        <result column="DRUG_TYPE" jdbcType="VARCHAR" property="drugType"/>
        <result column="ARK_FLAG" jdbcType="VARCHAR" property="arkFlag"/>
        <result column="ARK_QTY" jdbcType="VARCHAR" property="arkQty"/>
    </resultMap>

    <sql id="item">
        DRUG_DEPT_CODE,
        DRUG_CODE,
        DRUG_QUALITY,
        PACK_UNIT,
        PACK_QTY,
        MIN_UNIT,
        SHOW_FLAG,
        SHOW_UNIT,
        RETAIL_PRICE,
        STORE_SUM,
        STORE_COST,
        PREOUT_SUM,
        PREOUT_COST,
        VALID_DATE,
        PLACE_CODE,
        PRODUCER_CODE,
        MANAGE_QUALITY,
        LOW_SUM,
        TOP_SUM,
        NEED_BATCH,
        USEFUL_DAYS,
        LACK_FLAG,
        DAILTYCHECK_FLAG,
        UNIT_FLAG,
        CHANGE_FLAG,
        VALID_STATE,
        MARK,
        OPER_CODE,
        OPER_DATE,
        DRUG_TYPE,
        ARK_FLAG,
        ARK_QTY
    </sql>

    <select id="queryStockInfo" resultMap="map">
        SELECT
        <include refid="item"/>
        FROM
            XYHIS.PHA_COM_STOCKINFO_HEDGING
        <where>
            <if test="true">
                AND DRUG_DEPT_CODE = #{deptCode}
            </if>
            <if test="true">
                AND DRUG_CODE = #{drugCode}
            </if>
        </where>
    </select>
</mapper>