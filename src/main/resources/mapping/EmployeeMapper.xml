<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaos.his.mapper.EmployeeMapper">

    <select id="GetEmployeeByEmplCode" resultMap="employeeMap">
        SELECT
            T1.EMPL_ID,
            T1.EMPL_NAME,
            T1.SEX_CODE,
            T1.BIRTHDAY,
            T1.IDENNO,
            T1.TEL,
            T1.EMAIL,
            T2.DEPT_ID,
            T2.DEPT_NAME,
            T2.DEPTOWN
        FROM
            DAWN_ORG_EMPL T1
            LEFT JOIN DAWN_ORG_DEPT T2 ON T2.DEPT_ID = T1.DEPT_ID
        WHERE
            T1.EMPL_ID = #{emplCode}
    </select>

    <resultMap id="employeeMap" type="com.kaos.his.entity.personnel.Employee">
        <id column="EMPL_ID" jdbcType="VARCHAR" property="code"/>
        <result column="EMPL_NAME" jdbcType="VARCHAR" property="name"/>
        <result column="SEX_CODE" jdbcType="VARCHAR" property="sex"/>
        <result column="BIRTHDAY" jdbcType="VARCHAR" property="birthday"/>
        <result column="IDENNO" jdbcType="VARCHAR" property="identityNo"/>
        <result column="TEL" jdbcType="VARCHAR" property="phoneNo"/>
        <result column="EMAIL" jdbcType="VARCHAR" property="email"/>
        <association javaType="com.kaos.his.entity.organization.Department" property="dept">
            <result column="DEPT_ID" jdbcType="VARCHAR" property="code"/>
            <result column="DEPT_NAME" jdbcType="VARCHAR" property="name"/>
            <result column="DEPTOWN" jdbcType="VARCHAR" property="deptOwn"/>
        </association>
    </resultMap>
</mapper>